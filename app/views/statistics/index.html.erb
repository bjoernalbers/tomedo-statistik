<h1>Tomedo-Statistik</h1>

<%= form_tag statistics_path, method: :get do %>
  <%= label_tag :start, 'Start:' %>
  <%= date_field_tag :start, l(@start) %>
  <%= label_tag :stop, 'Ende:' %>
  <%= date_field_tag :stop, l(@stop) %>
  <%= submit_tag 'Aktualisieren', name: nil %>
<% end %>

<h2>Anzahl der Termine je Terminart</h2>

<%= content_tag :div, '', id: 'appointments', data: {appointments: @appointments} %>

<script>
new Morris.Bar({
  // ID of the element in which to draw the chart.
  element: 'appointments',
  data: $('#appointments').data('appointments'),

  // The name of the data record attribute that contains x-values.
  xkey: 'bezeichnung',

  // A list of names of data record attributes that contain y-values.
  ykeys: ['anzahl_termine'],
  xLabelAngle: 45,

  // Labels for the ykeys -- will be displayed when you hover over the
  // chart.
  labels: ['Anzahl Termine']
});
</script>
